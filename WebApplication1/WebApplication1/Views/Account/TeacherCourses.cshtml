
<div ng-init="teacherCourseDetails('@User.Identity.Name')">
    <br />

    <button class="btn btn-outline-primary" type="button" data-toggle="collapse"
            data-target="#collapseAddCourse" aria-expanded="false" aria-controls="collapseAddCourse" ng-click="setEmptyCourse()">
        Curs nou
    </button>
    <div class="collapse" id="collapseAddCourse">
        <div class="card card-body">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Titlu curs</span>
                </div>
                <input type="text" class="form-control" ng-model="teacherCourse.title" required />
                <input type="button" value="Adaugă curs" class="btn btn-primary" ng-click="addTeacherCourse('@User.Identity.Name', teacherCourse)" />
            </div>
        </div>
    </div>
    <div class="collapse" id="collapseEditCourse">
        <div class="card card-body">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">Titlu curs</span>
                </div>
                <input type="text" class="form-control" ng-model="thisTeacherCourse.title" required />
                <input type="button" value="Salvează" class="btn btn-primary" ng-click="editTeacherCourse(thisTeacherCourse)" />
            </div>
        </div>
    </div>
    <hr />

    <div ng-show="questionIsLaunched">
        <p class="text-success">
            Întrebare lansată! Timp de răspuns rămas:
        </p>
        <h2 class="text-secondary">
            {{time | date:'mm:ss'}}
        </h2>
    </div>

    <div class="accordion" id="accordionCourses" ng-hide="questionIsLaunched">
        <div class="card" ng-repeat="course in teacherCourses">
            <div class="card-header" id="heading{{$index}}">
                <h5 class="mb-0">
                    <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse{{$index}}"
                            aria-expanded="true" aria-controls="collapse{{$index}}" ng-click="showCourseQuestions(course.id)">
                        {{course.title}}
                    </button>
                    <span class="badge badge-dark">
                        {{course.questionsNumber}}
                    </span>
                    <span class="float-right">
                        <button class="btn btn-link" type="button" data-toggle="collapse"
                                data-target="#collapseEditCourse" aria-expanded="false" aria-controls="collapseEditCourse" ng-click="populateCourseField(course)">
                            Editează
                        </button>
                        <button class="btn btn-link" ng-click="deleteTeacherCourse(course, '@User.Identity.Name')" ng-hide="course.questionsNumber>'0'">
                            Șterge
                        </button>
                        <button type="button" class="btn btn-outline-primary" data-toggle="modal"
                                data-target="#addQuestionModal" ng-click="navigateToQuestionModal(course.id)">
                            +
                        </button>
                    </span>
                </h5>
            </div>
            <div id="collapse{{$index}}" class="collapse" aria-labelledby="heading{{$index}}" data-parent="#accordionCourses">
                <div class="card-body">
                    <div class="table-responsive">
                        <p class="text-danger">
                            {{noQuestionsMessage}}
                        </p>
                        <table class="table table-sm table-bordered" ng-show="showQuestionTable">
                            <thead class="alert-primary text-center">
                                <tr>
                                    <th>
                                        Întrebare
                                    </th>
                                    <th>
                                        Timp de răspuns (minute)
                                    </th>
                                    <th>
                                        Editează / Șterge
                                    </th>
                                    <th>
                                        Răspunsuri
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="text-center">
                                <tr ng-repeat="item in courseQuestions">
                                    <td>
                                        {{item.questionName}}
                                    </td>
                                    <td>
                                        {{item.answerTime}}
                                    </td>
                                    <td>
                                        <span>
                                            <button type="button" class="btn btn-link" data-toggle="modal"
                                                    data-target="#editQuestionModal" ng-click="navigateToEditQuestionModal(item)">
                                                Editează
                                            </button>
                                            <button class="btn btn-link" ng-hide="item.answersNumber>'0'" ng-click="deleteCourseQuestion(item)">Șterge</button>
                                        </span>
                                    </td>
                                    <td>
                                        <span class="badge badge-primary">
                                            Total: <strong>{{item.answersNumber}}</strong>
                                        </span>
                                        <button class="btn btn-link" ng-click="navigateToAnswersPage(item)" ng-show="item.answersNumber>'0'">Vezi răspunsuri</button>
                                        <button class="btn btn-success float-right" ng-click="launchQuestion(item, '@User.Identity.Name')">
                                            ->
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <br />
        <input type="button" value="Înapoi" class="btn btn-outline-primary" ng-click="backToTeacherDailyTimetable()" />
    </div>
</div>

<div class="modal fade" id="addQuestionModal" tabindex="-1" role="dialog" aria-labelledby="addQuestionModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addQuestionModalLabel">Întrebare nouă</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card card-body">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Întrebare</span>
                        </div>
                        <input type="text" class="form-control" ng-model="courseQuestion.questionName" required />
                    </div>
                </div>
                <div class="card card-body">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Timp de răspuns (min)</span>
                        </div>
                        <input type="number" class="form-control" ng-model="courseQuestion.answerTime" required />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Închide</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="addCourseQuestion(courseQuestion, '@User.Identity.Name')">Adaugă</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editQuestionModal" tabindex="-1" role="dialog" aria-labelledby="editQuestionModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editQuestionModalLabel">Editează întrebarea</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card card-body">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Întrebare</span>
                        </div>
                        <input type="text" class="form-control" ng-model="thisCourseQuestion.questionName" required />
                    </div>
                </div>
                <div class="card card-body">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Timp de răspuns (min)</span>
                        </div>
                        <input type="number" class="form-control" ng-model="thisCourseQuestion.answerTime" required />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Închide</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="editCourseQuestion(thisCourseQuestion)">Salvează</button>
            </div>
        </div>
    </div>
</div>